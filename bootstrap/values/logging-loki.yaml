# Deploy Loki in SingleBinary mode for simpler local setup
deploymentMode: SingleBinary

singleBinary:
  # Run a single replica of Loki
  replicas: 1
  # Define resource requests for the Loki pod
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
  # Configure persistence for Loki data
  persistence:
    enabled: true
    size: 10Gi
    # Specify the StorageClass for the PVC
    storageClass: "standard"

# Disable separate backend, read, and write components in SingleBinary mode
backend:
  replicas: 0
read:
  replicas: 0
write:
  replicas: 0

loki:
  # Disable authentication for easier local access
  auth_enabled: false
  # Common configuration for all Loki components (relevant in SingleBinary mode too)
  commonConfig:
    # Set replication factor to 1 for single instance setup
    replication_factor: 1
  # Configure storage backend
  storage:
    # Use filesystem storage for simplicity in local dev
    type: filesystem
  # Define schema configuration for Loki data storage
  schemaConfig:
    configs:
      # Define a schema starting from 2023-01-01
      - from: 2023-01-01
        # Use the Time Series Database (TSDB) index store (recommended)
        store: tsdb
        # Specify the object store type (matches storage.type)
        object_store: filesystem
        # Use schema v12 for Loki 2.8.x
        schema: v12
        # Configure the index parameters
        index:
          prefix: index_
          period: 24h